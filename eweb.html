<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AI E-Commerce Store</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = { darkMode: 'class' }
</script>

<style>
  body { font-family: "Poppins", sans-serif; transition: 0.3s; }
  .card:hover { transform: scale(1.03); transition: 0.2s; }
  .ai-bubble { animation: float 2s infinite ease-in-out; }
  @keyframes float {
    0% { transform: translateY(0) }
    50% { transform: translateY(-5px) }
    100% { transform: translateY(0) }
  }
  nav a.active {
    font-weight: 600;
    border-bottom: 2px solid #000;
  }
</style>
</head>

<body class="p-4 sm:p-6 max-w-7xl mx-auto bg-gray-100 dark:bg-gray-900 dark:text-white min-h-screen flex flex-col">

<!-- NAVBAR -->
<nav class="flex justify-between items-center mb-6 border-b border-gray-300 dark:border-gray-700 pb-2">
  <div class="text-3xl font-semibold cursor-pointer" onclick="showView('home')">AI Shop</div>

  <ul class="flex space-x-4 text-lg">
    <li><a href="#" class="nav-link active" onclick="showView('home', event)">Home</a></li>
    <li><a href="#" class="nav-link" onclick="showView('about', event)">About</a></li>
    <li><a href="#" class="nav-link" onclick="showView('login', event)">Login</a></li>
    <li><a href="#" class="nav-link" onclick="showView('signup', event)">Sign Up</a></li>
    <li><a href="#" class="nav-link" onclick="showView('admin', event)">Admin</a></li>
  </ul>

  <button onclick="toggleDarkMode()" class="px-3 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg">ðŸŒ“</button>

  <button onclick="toggleCart()" 
    class="relative p-3 rounded-full bg-gray-200 dark:bg-gray-700 ml-3">ðŸ›’
      <span id="cartCount" class="absolute -top-1 -right-1 bg-red-600 text-white text-xs px-2 py-0.5 rounded-full">0</span>
  </button>
</nav>

<main class="flex-1 relative">

<!-- HOME VIEW -->
<section id="home-view" class="space-y-6">

  <div class="flex flex-col md:flex-row md:justify-between gap-4">

    <div class="flex-1 flex gap-2">
      <input id="searchInput" type="text" placeholder="Search products..."
        class="flex-1 p-3 rounded-lg border dark:border-gray-700 dark:bg-gray-800" />
      <button onclick="searchProducts()" class="px-4 py-3 bg-black text-white rounded-lg">Search</button>
    </div>

    <aside class="w-full md:w-64 bg-white dark:bg-gray-800 p-5 rounded-xl shadow">
      <h2 class="text-lg font-medium mb-3">Categories</h2>
      <ul class="space-y-2">
        <li><button onclick="filterCategory('all')">All</button></li>
        <li><button onclick="filterCategory('electronics')">Electronics</button></li>
        <li><button onclick="filterCategory('fashion')">Fashion</button></li>
        <li><button onclick="filterCategory('home')">Home</button></li>
      </ul>
    </aside>

  </div>

  <!-- PRODUCTS -->
  <section class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-5">
    <div id="productGrid" class="contents"></div>
  </section>

</section>

<!-- ABOUT -->
<section id="about-view" class="hidden p-4 bg-white dark:bg-gray-800 rounded-xl shadow max-w-4xl mx-auto">
  <h2 class="text-2xl font-semibold mb-4">About AI Shop</h2>
  <p>This is an AI-Powered shopping demo using the latest Google Gemini API.</p>
  <button onclick="showView('home')" class="mt-6 px-6 py-3 bg-black text-white rounded-lg">Back</button>
</section>

<!-- LOGIN -->
<section id="login-view" class="hidden max-w-md mx-auto p-6 bg-white dark:bg-gray-800 rounded-xl shadow">
  <h2 class="text-2xl font-semibold mb-6">Login</h2>
  <form onsubmit="handleLogin(event)" class="space-y-4">
    <input type="email" id="loginEmail" placeholder="Email" required class="w-full p-3 border rounded dark:bg-gray-700" />
    <input type="password" id="loginPassword" placeholder="Password" required class="w-full p-3 border rounded dark:bg-gray-700" />
    <button class="w-full bg-black text-white py-3 rounded-lg">Sign In</button>
  </form>
</section>

<!-- SIGNUP -->
<section id="signup-view" class="hidden max-w-md mx-auto p-6 bg-white dark:bg-gray-800 rounded-xl shadow">
  <h2 class="text-2xl font-semibold mb-6">Sign Up</h2>
  <form onsubmit="handleSignup(event)" class="space-y-4">
    <input type="text" id="signupName" placeholder="Full Name" required class="w-full p-3 border rounded dark:bg-gray-700" />
    <input type="email" id="signupEmail" placeholder="Email" required class="w-full p-3 border rounded dark:bg-gray-700" />
    <input type="password" id="signupPassword" placeholder="Password" required class="w-full p-3 border rounded dark:bg-gray-700" />
    <button class="w-full bg-black text-white py-3 rounded-lg">Create Account</button>
  </form>
</section>

<!-- ADMIN -->
<section id="admin-view" class="hidden p-6 bg-white dark:bg-gray-800 rounded-xl shadow">
  <h2 class="text-3xl font-semibold mb-4">Admin Panel</h2>
  <p>Future Version: Product Management, Orders, Users.</p>
</section>

</main>

<!-- CART SIDEBAR -->
<div id="cartSidebar"
  class="fixed right-0 top-0 h-full w-80 bg-white dark:bg-gray-800 shadow-xl p-5 z-50 transform translate-x-full transition-transform">

  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-semibold">Shopping Cart</h2>
    <button onclick="toggleCart()" class="text-2xl">âœ–</button>
  </div>

  <div id="cartItems" class="space-y-4 max-h-[70vh] overflow-y-auto"></div>

  <div class="mt-5 border-t pt-3 flex justify-between text-lg font-semibold">
    <p>Total:</p> <p>â‚¹ <span id="cartTotal">0</span></p>
  </div>

  <button class="w-full mt-3 bg-black text-white py-3 rounded-lg">Checkout</button>
</div>

<div id="cartBackdrop"
  class="hidden fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm z-40"
  onclick="toggleCart()"></div>

<!-- AI BUTTON -->
<button onclick="toggleChat()"
  class="fixed bottom-5 right-5 bg-black text-white p-4 rounded-full shadow-xl ai-bubble">ðŸ’¬</button>

<!-- AI CHAT -->
<div id="chatWindow"
  class="hidden fixed bottom-24 right-5 w-80 bg-white dark:bg-gray-800 shadow-xl rounded-xl p-4">

  <h3 class="font-semibold mb-2">AI Shopping Assistant</h3>
  <div id="chatMessages" class="h-56 overflow-y-auto border rounded p-2 mb-3 bg-gray-50 dark:bg-gray-700"></div>

  <div class="flex gap-2">
    <input id="chatInput" type="text" placeholder="Ask something..."
      class="flex-1 p-2 border rounded dark:bg-gray-700" />
    <button onclick="sendMessage()" class="px-3 bg-black text-white rounded">Send</button>
  </div>
</div>

<script>
/* ---------------- PRODUCT DATA ---------------- */
const products = [
  {id:1, name:"Wireless Earbuds", price:1999, cat:"electronics", img:"https://via.placeholder.com/300"},
  {id:2, name:"Smart Watch", price:2999, cat:"electronics", img:"https://via.placeholder.com/300"},
  {id:3, name:"Men's Jacket", price:1299, cat:"fashion", img:"https://via.placeholder.com/300"},
  {id:4, name:"Stylish Shoes", price:999,  cat:"fashion", img:"https://via.placeholder.com/300"},
  {id:5, name:"LED Lamp",       price:499,  cat:"home", img:"https://via.placeholder.com/300"},
  {id:6, name:"Kitchen Blender",price:1599, cat:"home", img:"https://via.placeholder.com/300"},
];

let cart = [];

/* ---------------- VIEW SWITCH ---------------- */
function showView(view, event){
  if(event) event.preventDefault();
  ["home","about","login","signup","admin"].forEach(v=>document.getElementById(v+"-view").classList.add("hidden"));
  document.getElementById(view+"-view").classList.remove("hidden");

  document.querySelectorAll("nav .nav-link").forEach(a=>a.classList.remove("active"));
  document.querySelectorAll("nav .nav-link").forEach(a=>{
    if(a.getAttribute("onclick").includes(view)) a.classList.add("active");
  });
}

/* ---------------- PRODUCT RENDER ---------------- */
function renderProducts(list){
  const grid = document.getElementById("productGrid");
  grid.innerHTML = "";
  list.forEach(p=>{
    grid.innerHTML += `
      <div class="card bg-white dark:bg-gray-800 p-3 rounded-xl shadow">
        <img src="${p.img}" class="rounded-lg mb-3">
        <h3 class="font-medium">${p.name}</h3>
        <p class="text-gray-600 dark:text-gray-300">â‚¹${p.price}</p>
        <button onclick="addToCart(${p.id})" class="mt-2 w-full bg-black text-white py-2 rounded-lg">Add to Cart</button>
      </div>`;
  });
}

renderProducts(products);

/* ---------------- SEARCH ---------------- */
function searchProducts(){
  const q = document.getElementById("searchInput").value.toLowerCase();
  renderProducts(products.filter(p=>p.name.toLowerCase().includes(q)));
}

function filterCategory(cat){
  renderProducts(cat==="all" ? products : products.filter(p=>p.cat===cat));
}

/* ---------------- CART ---------------- */
function addToCart(id){
  cart.push(products.find(p=>p.id===id));
  updateCart();
}

function removeFromCart(i){
  cart.splice(i,1);
  updateCart();
}

function updateCart(){
  const cartItems = document.getElementById("cartItems");
  const cartCount = document.getElementById("cartCount");
  const cartTotal = document.getElementById("cartTotal");

  cartItems.innerHTML = "";
  let total = 0;

  cart.forEach((item,i)=>{
    total += item.price;
    cartItems.innerHTML += `
      <div class="flex justify-between items-center bg-gray-100 dark:bg-gray-700 p-3 rounded">
        <div>
          <p class="font-medium">${item.name}</p>
          <p>â‚¹${item.price}</p>
        </div>
        <button onclick="removeFromCart(${i})" class="text-red-600">âœ–</button>
      </div>`;
  });

  cartTotal.textContent = total;
  cartCount.textContent = cart.length;
}

/* ---------------- CART TOGGLE ---------------- */
function toggleCart(){
  document.getElementById("cartSidebar").classList.toggle("translate-x-full");
  document.getElementById("cartBackdrop").classList.toggle("hidden");
}

/* ---------------- DARK MODE ---------------- */
function toggleDarkMode(){
  document.documentElement.classList.toggle("dark");
}

/* ---------------- AI CHAT ---------------- */
const GEMINI_KEY = "AIzaSyA_WutckxJ2nugRy0Dy73jbx941SwLpjGM";

async function sendMessage(){
  const input = document.getElementById("chatInput");
  let msg = input.value.trim();
  if(!msg) return;

  chatMessages.innerHTML += `<p><b>You:</b> ${msg}</p>`;
  input.value = "";

  let reply = await askGemini(msg);
  chatMessages.innerHTML += `<p><b>AI:</b> ${reply}</p>`;
  chatMessages.scrollTop = chatMessages.scrollHeight;
}

async function askGemini(q){
  try{
    const response = await fetch(
      "https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key="+GEMINI_KEY,
      {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify({
          contents: [{ role:"user", parts:[{ text:q }] }]
        })
      }
    );

    const data = await response.json();
    return data.candidates?.[0]?.content?.parts?.[0]?.text || "No response received";
  }
  catch(e){
    return "AI error: " + e;
  }
}

function toggleChat(){
  document.getElementById("chatWindow").classList.toggle("hidden");
}

/* ---------------- LOGIN / SIGNUP (DEMO) ---------------- */
function handleLogin(e){
  e.preventDefault();
  alert("Logged in as: " + document.getElementById("loginEmail").value);
  showView("home");
}

function handleSignup(e){
  e.preventDefault();
  alert("Account created for: " + document.getElementById("signupName").value);
  showView("home");
}

</script>
</body>
</html>

